  
 0 
 00:00:00,0 --> 00:00:05,0 
 https://git.ir/ ترجمه سید علی محترمی
  
 1 
 00:00:00,05 --> 00:00:01,05 
 - [مربی] لوازم آزمایش 
  
 2 
 00:00:01,05 --> 00:00:04,02 
 یک محیط تهی برای آزمایش ایجاد می کند. 
  
 3 
 00:00:04,02 --> 00:00:07,08 
 آزمایش سرور به یک بانک اطلاعاتی نیاز دارد که داده های موجود در آن باشد. 
  
 4 
 00:00:07,08 --> 00:00:10,06 
 شما می توانید برای ایجاد مانند بانک اطلاعات از فیکسچر استفاده کنید 
  
 5 
 00:00:10,06 --> 00:00:13,02 
 و قبل از هر آزمایش ، آن را جمع کنید 
  
 6 
 00:00:13,02 --> 00:00:15,09 
 یا هر پرونده آزمایشی اجرا شود 
  
 7 
 00:00:15,09 --> 00:00:17,01 
 به محض اینکه کد دارید 
  
 8 
 00:00:17,01 --> 00:00:19,04 
 برای ایجاد جدول در یک بانک اطلاعاتی. 
  
 9 
 00:00:19,04 --> 00:00:21,04 
 db.py داریم. 
  
 10 
 00:00:21,04 --> 00:00:24,02 
 ما تعریف sql_schema را داریم. 
  
 11 
 00:00:24,02 --> 00:00:26,04 
 و در خط 15 ، ایجاد کنید 
  
 12 
 00:00:26,04 --> 00:00:29,04 
 که با طرح جدید پایگاه داده را جمع می کند ، 
  
 13 
 00:00:29,04 --> 00:00:31,02 
 ایجاد جدول در آنجا. 
  
 14 
 00:00:31,02 --> 00:00:33,08 
 برای ایجاد دیتابیس به صورت خودکار 
  
 15 
 00:00:33,08 --> 00:00:36,04 
 می توانید از یک فیش پیتست استفاده کنید. 
  
 16 
 00:00:36,04 --> 00:00:41,09 
 شما باید از فهرست طول فایل در فهرست استفاده کنید. 
  
 17 
 00:00:41,09 --> 00:00:44,01 
 ما pytest را وارد می کنیم 
  
 18 
 00:00:44,01 --> 00:00:47,00 
 و sqlite3 را وارد می کنیم که یک پایگاه داده مانع است 
  
 19 
 00:00:47,00 --> 00:00:48,09 
 که همراه پایتون است. 
  
 20 
 00:00:48,09 --> 00:00:52,05 
 در خط شش ، تابعی به نام دیتابیس تعریف می کنیم. 
  
 21 
 00:00:52,05 --> 00:00:56,09 
 و در خط پنجم آنرا با pytest.fixture تزئین می کنیم. 
  
 22 
 00:00:56,09 --> 00:00:59,04 
 در خط هفت اتصال را ایجاد می کنیم. 
  
 23 
 00:00:59,04 --> 00:01:02,03 
 در خط هشت اتصال را به دست می آوریم. 
  
 24 
 00:01:02,03 --> 00:01:03,09 
 Pytest این ارتباط را از دست می دهد. 
  
 25 
 00:01:03,09 --> 00:01:05,07 
 و پس از انجام آزمایش ، 
  
 26 
 00:01:05,07 --> 00:01:08,09 
 کد را از خط نه و 10 ادامه خواهد داد 
  
 27 
 00:01:08,09 --> 00:01:10,08 
 برای تمیز کردن 
  
 28 
 00:01:10,08 --> 00:01:13,06 
 برای استفاده از این فیکسچر در آزمون ، 
  
 29 
 00:01:13,06 --> 00:01:17,01 
 ما در خط چهار def_create_schema تعریف می کنیم ، 
  
 30 
 00:01:17,01 --> 00:01:19,06 
 که پارامتری به نام دیتابیس می گیرد. 
  
 31 
 00:01:19,06 --> 00:01:20,08 
 این نام پارامتر 
  
 32 
 00:01:20,08 --> 00:01:25,08 
 باید نام فایل فیکسچر را در conftest.py مطابقت دهید. 
  
 33 
 00:01:25,08 --> 00:01:27,08 
 و بعد ما طرح را ایجاد می کنیم ، 
  
 34 
 00:01:27,08 --> 00:01:29,07 
 ما چک های خود را انجام می دهیم ، 
  
 35 
 00:01:29,07 --> 00:01:32,01 
 و در پایان هنگامی که آزمون انجام خواهد شد ، 
  
 36 
 00:01:32,01 --> 00:01:35,06 
 pytest کد پاکسازی را برای ما فراخوانی می کند. 
  
 37 
 00:01:35,06 --> 00:01:42,06 
 و اکنون می توانیم تست های python -m pytest -v را اجرا کنیم. 
  
 38 
 00:01:42,06 --> 00:01:46,00 
 و می بینیم که test_create_schema گذشت. 
  
